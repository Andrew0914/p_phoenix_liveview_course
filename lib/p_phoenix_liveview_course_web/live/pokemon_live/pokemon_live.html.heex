<section class="gym">
  <h1>Pokemon battle!ğŸ’¥</h1>

  <div :if={!@p1 or !@p2} class="selection-zone">
    <h2>Choose your Pokemon</h2>
    <div class="pokemon-list">
      <PokemonComponents.pokemon_card :for={pokemon <- @pokemons} pokemon={pokemon} />
    </div>
  </div>

  <div :if={@countdown && @countdown > 0} class="countdown">
    <span class="text-4xl font-bold"><%= @countdown %></span>
  </div>

  <h2>Battle area</h2>

  <div
    class="pokemon-battle"
    id="battle-area"
    name={if @show_results, do: "#{@battle_result.status}-battle", else: "battle"}
    phx-hook="PokemonBattle"
  >
    <div :if={@p1} class="player-slot" id="p1-pokemon">
      <p><%= if @role == :p1, do: "You", else: "Player 1" %></p>
      <%= if @role == :p1 or @show_results do %>
        <PokemonComponents.pokemon_card pokemon={@p1.pokemon} />
      <% else %>
        <div class="mystery-card">?</div>
      <% end %>
    </div>

    <div class="vs">VS</div>

    <div :if={@p2} class="player-slot" id="p2-pokemon">
      <p><%= if @role == :p2, do: "You", else: "Player 2" %></p>
      <%= if @role == :p2 or @show_results do %>
        <PokemonComponents.pokemon_card pokemon={@p2.pokemon} />
      <% else %>
        <div class="mystery-card">?</div>
      <% end %>
    </div>
  </div>

  <div :if={@show_results} class="result-area">
    <h3 class="winner-text">
      <%= case @battle_result.status do %>
        <% :draw -> %> Es un empate! ğŸ¤
        <% :p1 -> %> GanÃ³ <%= if @role == :p1, do: "TÃº", else: "Jugador 1" %>! ğŸ†
        <% :p2 -> %> GanÃ³ <%= if @role == :p2, do: "TÃº", else: "Jugador 2" %>! ğŸ†
      <% end %>
    </h3>
    
    <button phx-click="reset_game" class="battle-button">
      Play Again ğŸ”„
    </button>
  </div>
</section>