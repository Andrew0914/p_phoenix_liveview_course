<section class="gym">
  <h1>Pokemon battle!ğŸ’¥</h1>

  <h2>Choose your Pokemon</h2>
  <div class="pokemon-list">
    <PokemonComponents.pokemon_card
      :for={pokemon <- @pokemons}
      pokemon={pokemon}
      id={"#{pokemon.id}-pokemon"}
    />
  </div>

  <h2>Battle area</h2>

  <div
    class="pokemon-battle"
    id="battle-area"
    name={if @battle_result, do: "#{@battle_result.status}-battle", else: "battle"}
    phx-hook="PokemonBattle"
  >
    <PokemonComponents.pokemon_card
      :if={@p1}
      pokemon={@p1.pokemon}
      player={if @role == :p1, do: "You", else: @p1.name}
      id={"#{@p1.id}-pokemon"}
    />

    <PokemonComponents.pokemon_card
      :if={@p2}
      pokemon={@p2.pokemon}
      player={if @role == :p2, do: "You", else: @p2.name}
      id={"#{@p2.id}-pokemon"}
    />
  </div>

  <button :if={@p1 && @p2} class="battle-button" id="battle-button" phx-click="battle">
    Battle
  </button>

  <h2 :if={@show_result}>
    <%= case @battle_result.status do %>
      <% :p1 -> %>
        Player 1 wins ğŸ†!
      <% :p2 -> %>
        Player 2 wins ğŸ†!
      <% :draw -> %>
        It's a draw ğŸ¤·!
    <% end %>
  </h2>

  <button phx-click="reset_game" class="battle-button">
    Reset Game
  </button>
</section>
